-- Aim Assist UI v3.3 (Mobile + PC)
-- by GPT-5 | Safe Studio Script

local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- ‚öôÔ∏è Th√¥ng s·ªë m·∫∑c ƒë·ªãnh
local FOV = 60
local Smoothness = 0.1
local MaxDistance = 75
local showCircle = true
local menuVisible = false

-- üéØ T·∫°o v√≤ng tr√≤n aim
local aimCircle = Drawing.new("Circle")
aimCircle.Visible = showCircle
aimCircle.Thickness = 2
aimCircle.Radius = FOV
aimCircle.Color = Color3.fromRGB(0, 255, 100)
aimCircle.Transparency = 0.4
aimCircle.Filled = false

-- üß± GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AimAssistUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- N√∫t m·ªü menu
local openButton = Instance.new("TextButton")
openButton.Size = UDim2.new(0, 140, 0, 40)
openButton.Position = UDim2.new(0.5, -70, 0, 10)
openButton.AnchorPoint = Vector2.new(0, 0)
openButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
openButton.Text = "‚öôÔ∏è Aimbot Menu"
openButton.TextColor3 = Color3.new(1, 1, 1)
openButton.Font = Enum.Font.GothamBold
openButton.TextSize = 16
openButton.Parent = screenGui
openButton.AutoButtonColor = true
openButton.Active = true
openButton.Draggable = true -- nh·∫•n gi·ªØ ƒë·ªÉ di chuy·ªÉn

-- Menu ch√≠nh
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 260, 0, 220)
frame.Position = UDim2.new(0.5, -130, 0.25, -110)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BorderSizePixel = 0
frame.Visible = false
frame.Parent = screenGui
frame.Active = true
frame.Draggable = true

local UICorner = Instance.new("UICorner", frame)
UICorner.CornerRadius = UDim.new(0, 10)

-- Thanh k√©o tr√™n c√πng (ƒë·ªÉ k√©o)
local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, 25)
header.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
header.Parent = frame
local headerCorner = Instance.new("UICorner", header)
headerCorner.CornerRadius = UDim.new(0, 10)
local dragActive = false
local dragInput, dragStart, startPos

header.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragActive = true
		dragStart = input.Position
		startPos = frame.Position
	end
end)
header.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragActive = false
	end
end)
UIS.InputChanged:Connect(function(input)
	if dragActive and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

local title = Instance.new("TextLabel")
title.Text = "üéØ Aim Assist Settings"
title.Size = UDim2.new(1, 0, 0, 25)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = header

-- üß© H√†m t·∫°o slider
local function createSlider(name, min, max, default, step, yPos, callback)
	local label = Instance.new("TextLabel")
	label.Text = name .. ": " .. default
	label.Size = UDim2.new(1, -20, 0, 20)
	label.Position = UDim2.new(0, 10, 0, yPos)
	label.TextColor3 = Color3.new(1, 1, 1)
	label.BackgroundTransparency = 1
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.Parent = frame

	local slider = Instance.new("TextButton")
	slider.Size = UDim2.new(1, -20, 0, 10)
	slider.Position = UDim2.new(0, 10, 0, yPos + 20)
	slider.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	slider.Text = ""
	slider.AutoButtonColor = false
	slider.Parent = frame

	local fill = Instance.new("Frame")
	fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
	fill.BackgroundColor3 = Color3.fromRGB(0, 200, 100)
	fill.Parent = slider

	slider.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			local moveConn
			moveConn = UIS.InputChanged:Connect(function(move)
				if move.UserInputType == Enum.UserInputType.MouseMovement or move.UserInputType == Enum.UserInputType.Touch then
					local rel = math.clamp((move.Position.X - slider.AbsolutePosition.X) / slider.AbsoluteSize.X, 0, 1)
					local val = math.floor(min + (max - min) * rel)
					fill.Size = UDim2.new(rel, 0, 1, 0)
					label.Text = name .. ": " .. val
					callback(val)
				end
			end)
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					moveConn:Disconnect()
				end
			end)
		end
	end)
end

-- üõ† Slider: FOV, Smoothness, Distance
createSlider("FOV", 20, 200, FOV, 1, 40, function(val)
	FOV = val
	aimCircle.Radius = FOV
end)
createSlider("Smoothness", 1, 100, math.floor(Smoothness * 100), 1, 90, function(val)
	Smoothness = val / 100
end)
createSlider("Max Distance", 25, 300, MaxDistance, 1, 140, function(val)
	MaxDistance = val
end)

-- üîò N√∫t ƒë√≥ng menu
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 100, 0, 30)
closeButton.Position = UDim2.new(0.5, -50, 1, -40)
closeButton.Text = "ƒê√≥ng"
closeButton.BackgroundColor3 = Color3.fromRGB(50, 150, 80)
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 16
closeButton.Parent = frame
local closeCorner = Instance.new("UICorner", closeButton)
closeCorner.CornerRadius = UDim.new(0, 8)
closeButton.MouseButton1Click:Connect(function()
	frame.Visible = false
	menuVisible = false
end)

-- üîò N√∫t m·ªü
openButton.MouseButton1Click:Connect(function()
	menuVisible = not menuVisible
	frame.Visible = menuVisible
end)

-- üéØ H√†m ch·ªçn ng∆∞·ªùi g·∫ßn nh·∫•t
local function getClosestPlayer()
	local closest = nil
	local shortestDist = FOV
	for _, plr in pairs(game.Players:GetPlayers()) do
		if plr ~= player and plr.Character and plr.Character:FindFirstChild("Head") then
			local pos, visible = camera:WorldToViewportPoint(plr.Character.Head.Position)
			if visible then
				local dist2D = (Vector2.new(pos.X, pos.Y) - Vector2.new(camera.ViewportSize.X/2, camera.ViewportSize.Y/2)).Magnitude
				local dist3D = (plr.Character.Head.Position - camera.CFrame.Position).Magnitude
				if dist2D < FOV and dist3D <= MaxDistance then
					if dist2D < shortestDist then
						shortestDist = dist2D
						closest = plr
					end
				end
			end
		end
	end
	return closest
end

-- üîÅ Update v√≤ng tr√≤n & aim
RS.RenderStepped:Connect(function()
	aimCircle.Position = Vector2.new(camera.ViewportSize.X/2, camera.ViewportSize.Y/2)
	aimCircle.Radius = FOV

	local target = getClosestPlayer()
	if target then
		local head = target.Character:FindFirstChild("Head")
		if head then
			local targetCF = CFrame.new(camera.CFrame.Position, head.Position)
			camera.CFrame = camera.CFrame:Lerp(targetCF, Smoothness)
		end
	end
end)
